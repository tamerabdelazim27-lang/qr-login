<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø³Ø­ ÙƒØ±Øª Ø§Ù„ÙˆØ§ÙŠ ÙØ§ÙŠ</title>

<style>
body{
  margin:0;
  font-family: Arial, Tahoma;
  background:#f5f7fb;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}
.container{
  width:360px;
}
.card{
  background:#fff;
  padding:20px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
  text-align:center;
  margin-bottom:15px;
}
.header{
  background:#eaf1ff;
}
h2{
  margin:0 0 5px;
  color:#2a6df4;
}
p{
  margin:0;
  color:#555;
  font-size:14px;
}
.icon{
  font-size:32px;
  margin-bottom:10px;
}
.btn{
  margin-top:15px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#4c8bf5;
  color:#fff;
  font-size:16px;
}
.help{
  font-size:13px;
  color:#2a6df4;
  margin-top:10px;
}
input{
  display:none;
}
</style>
</head>

<body>

<div class="container">

  <div class="card header">
    <div class="icon">ğŸ“¶</div>
    <h2>Ù…Ø³Ø­ ÙƒØ±Øª Ø§Ù„ÙˆØ§ÙŠ ÙØ§ÙŠ</h2>
    <p>Ø§Ù…Ø³Ø­ Ø§Ù„ÙƒÙŠÙˆ Ø¢Ø± Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ù‰ ÙƒØ±Øª Ø§Ù„ÙˆØ§ÙŠ ÙØ§ÙŠ</p>
  </div>

  <div class="card">
    <div class="icon">ğŸ“·</div>
    <h2>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø­</h2>
    <p>Ø§Ø¶ØºØ· Ù„ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆÙ…Ø³Ø­ Ø§Ù„ÙƒØ±Øª</p>

    <button class="btn" onclick="openCamera()">ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
    <input id="cameraInput" type="file" accept="image/*" capture="environment">
  </div>

  <div class="card">
    <div class="help">ğŸ“± ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</div>
    <p>1ï¸âƒ£ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§"</p>
    <p>2ï¸âƒ£ ÙˆØ¬Ù‘Ù‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙŠÙˆ Ø¢Ø±</p>
    <p>3ï¸âƒ£ Ø³ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</p>
  </div>

</div>

<script>
function openCamera(){
  document.getElementById("cameraInput").click();
}

document.getElementById("cameraInput").addEventListener("change", async function(e){
  const file = e.target.files[0];
  if(!file) return;

  if(!("BarcodeDetector" in window)){
    alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø³Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ");
    return;
  }

  const img = new Image();
  img.onload = async ()=>{
    try{
      const detector = new BarcodeDetector({formats:["qr_code"]});
      const codes = await detector.detect(img);
      if(codes.length){
        const val = encodeURIComponent(codes[0].rawValue.trim());
        window.location.href =
          "http://10.10.10.1/login?username=" + val + "&password=" + val;
      }else{
        alert("Ù„Ù… ÙŠØªÙ… Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒÙŠÙˆ Ø¢Ø±ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");
      }
    }catch(e){
      alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø³Ø­");
    }
  };
  img.src = URL.createObjectURL(file);
});
</script>

</body>
</html>
